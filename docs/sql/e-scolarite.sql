CREATE TABLE demandes (id INT AUTO_INCREMENT NOT NULL, etudiant_id VARCHAR(255) DEFAULT NULL, type_demande_id INT DEFAULT NULL, created_at DATETIME DEFAULT NULL, updated_at DATETIME DEFAULT NULL, remarque VARCHAR(255) DEFAULT NULL, status TINYINT(1) DEFAULT NULL, date_reponce DATE DEFAULT NULL, notified TINYINT(1) DEFAULT NULL, INDEX IDX_BD940CBBDDEAB1A3 (etudiant_id), INDEX IDX_BD940CBB9DEA883D (type_demande_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE etat_demandes (id INT AUTO_INCREMENT NOT NULL, demande_id INT DEFAULT NULL, admin_id INT DEFAULT NULL, etat VARCHAR(255) DEFAULT NULL, justification VARCHAR(255) DEFAULT NULL, created_at DATETIME NOT NULL, INDEX IDX_2041A42B80E95E18 (demande_id), INDEX IDX_2041A42B642B8210 (admin_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE type_demandes (id INT AUTO_INCREMENT NOT NULL, code VARCHAR(255) NOT NULL, libelle VARCHAR(255) DEFAULT NULL, max_autorise INT DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE results_elp (elp_code VARCHAR(255) NOT NULL, etudiant_id VARCHAR(255) NOT NULL, annee INT NOT NULL, session INT NOT NULL, admissibilite INT NOT NULL, note DOUBLE PRECISION NOT NULL, status VARCHAR(255) NOT NULL, INDEX IDX_F17145FF560FED78 (elp_code), INDEX IDX_F17145FFDDEAB1A3 (etudiant_id), PRIMARY KEY(elp_code, etudiant_id, annee, session, admissibilite, note, status)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE element_pedagogi (code VARCHAR(255) NOT NULL, parent_code VARCHAR(255) DEFAULT NULL, nature_elp VARCHAR(255) NOT NULL, lib_elp VARCHAR(255) NOT NULL, lic_elp VARCHAR(255) NOT NULL, created_at DATE NOT NULL, updated_at DATE NOT NULL, etat_elp VARCHAR(255) NOT NULL, lib_elp_ar VARCHAR(255) NOT NULL, lic_elp_ar VARCHAR(255) NOT NULL, elp_order INT NOT NULL, INDEX IDX_B092279C4AF6062C (parent_code), PRIMARY KEY(code)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE etudiants (id VARCHAR(255) NOT NULL, code_appog VARCHAR(255) NOT NULL, cne VARCHAR(255) NOT NULL, cin VARCHAR(255) NOT NULL, date_naissance DATETIME NOT NULL, ville_naissance VARCHAR(255) NOT NULL, nom VARCHAR(255) NOT NULL, prenom VARCHAR(255) NOT NULL, nom_ar VARCHAR(255) NOT NULL, prenom_ar VARCHAR(255) NOT NULL, sexe VARCHAR(255) NOT NULL, annee_inscription INT NOT NULL, annee_depart INT DEFAULT NULL, adresse VARCHAR(255) NOT NULL, UNIQUE INDEX indx_code_apo (code_appog), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE admins (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(255) DEFAULT NULL, prenom VARCHAR(255) DEFAULT NULL, email VARCHAR(255) DEFAULT NULL, created_at DATETIME DEFAULT NULL, password VARCHAR(255) DEFAULT NULL, salt VARCHAR(255) DEFAULT NULL, expired TINYINT(1) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE type_reclamations (id INT AUTO_INCREMENT NOT NULL, code VARCHAR(255) NOT NULL, libelle VARCHAR(255) DEFAULT NULL, max_autorise INT DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE documents (id INT AUTO_INCREMENT NOT NULL, titre VARCHAR(255) DEFAULT NULL, path VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE reclamations (id INT AUTO_INCREMENT NOT NULL, etudiant_id VARCHAR(255) DEFAULT NULL, type_reclamation_id INT DEFAULT NULL, objet VARCHAR(255) DEFAULT NULL, description LONGTEXT DEFAULT NULL, reponse LONGTEXT DEFAULT NULL, created_at DATETIME NOT NULL, consulted_at DATETIME DEFAULT NULL, status INT DEFAULT NULL, INDEX IDX_1CAD6B76DDEAB1A3 (etudiant_id), INDEX IDX_1CAD6B767BA88B4D (type_reclamation_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE demandes ADD CONSTRAINT FK_BD940CBBDDEAB1A3 FOREIGN KEY (etudiant_id) REFERENCES etudiants (id);
ALTER TABLE demandes ADD CONSTRAINT FK_BD940CBB9DEA883D FOREIGN KEY (type_demande_id) REFERENCES type_demandes (id);
ALTER TABLE etat_demandes ADD CONSTRAINT FK_2041A42B80E95E18 FOREIGN KEY (demande_id) REFERENCES demandes (id);
ALTER TABLE etat_demandes ADD CONSTRAINT FK_2041A42B642B8210 FOREIGN KEY (admin_id) REFERENCES admins (id);
ALTER TABLE results_elp ADD CONSTRAINT FK_F17145FF560FED78 FOREIGN KEY (elp_code) REFERENCES element_pedagogi (code);
ALTER TABLE results_elp ADD CONSTRAINT FK_F17145FFDDEAB1A3 FOREIGN KEY (etudiant_id) REFERENCES etudiants (id);
ALTER TABLE element_pedagogi ADD CONSTRAINT FK_B092279C4AF6062C FOREIGN KEY (parent_code) REFERENCES element_pedagogi (code);
ALTER TABLE reclamations ADD CONSTRAINT FK_1CAD6B76DDEAB1A3 FOREIGN KEY (etudiant_id) REFERENCES etudiants (id);
ALTER TABLE reclamations ADD CONSTRAINT FK_1CAD6B767BA88B4D FOREIGN KEY (type_reclamation_id) REFERENCES type_reclamations (id);
